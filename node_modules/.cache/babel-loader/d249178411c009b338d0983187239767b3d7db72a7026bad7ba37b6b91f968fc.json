{"ast":null,"code":"import axios from 'axios';\nexport async function getAllUsers() {\n  const response = await axios.get('/api/users');\n  return response.data;\n}\nexport async function createUser(data) {\n  const response = await axios.post(`/api/user/register`, data);\n  return response;\n}\nexport async function login(data) {\n  const response = await axios.post(`/api/user/login`, data);\n  if (response.status === 200) {\n    localStorage.setItem(\"token\", JSON.stringify(response.data.accessToken));\n    localStorage.setItem(\"refreshToken\", JSON.stringify(response.data.refreshToken));\n    axios.interceptors.request.use(config => {\n      const token = localStorage.getItem('token');\n      if (token) {\n        config.headers['Authorization'] = `Bearer ${token}`;\n      }\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n  }\n  if (response.status === 400) {\n    console.log(\"login failed\");\n    this.$alert(res.data);\n  }\n  return response;\n}\nexport async function logout() {\n  // xoá user từ local storage để log out\n  localStorage.removeItem('token');\n}\nexport async function getUser() {\n  const response = await axios.get(`/api/user`);\n  return response;\n}","map":{"version":3,"names":["axios","getAllUsers","response","get","data","createUser","post","login","status","localStorage","setItem","JSON","stringify","accessToken","refreshToken","interceptors","request","use","config","token","getItem","headers","error","Promise","reject","console","log","$alert","res","logout","removeItem","getUser"],"sources":["D:/Capstone Project/Vue/mentore/src/services/UserService.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nexport async function getAllUsers() {\r\n\r\n    const response = await axios.get('/api/users');\r\n    return response.data;\r\n}\r\n\r\nexport async function createUser(data) {\r\n    const response = await axios.post(`/api/user/register`, data);\r\n    return response;\r\n}\r\n\r\nexport async function login(data) {\r\n    const response = await axios.post(`/api/user/login`, data);\r\n    if (response.status === 200){\r\n        localStorage.setItem(\"token\", JSON.stringify(response.data.accessToken));\r\n        localStorage.setItem(\"refreshToken\", JSON.stringify(response.data.refreshToken))\r\n        axios.interceptors.request.use(\r\n            (config) => {\r\n                const token = localStorage.getItem('token');\r\n        \r\n                if (token) {\r\n                    config.headers['Authorization'] = `Bearer ${token}`;\r\n                }\r\n        \r\n                return config;\r\n            },\r\n        \r\n            (error) => {\r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n    }\r\n    if (response.status === 400){\r\n        console.log(\"login failed\");\r\n        this.$alert(res.data);\r\n    }\r\n    return response;\r\n}\r\n\r\nexport async function logout() {\r\n    // xoá user từ local storage để log out\r\n    localStorage.removeItem('token');\r\n}\r\n\r\nexport async function getUser() {\r\n    const response = await axios.get(`/api/user`);\r\n    return response;\r\n}\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,eAAeC,WAAWA,CAAA,EAAG;EAEhC,MAAMC,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAG,CAAC,YAAY,CAAC;EAC9C,OAAOD,QAAQ,CAACE,IAAI;AACxB;AAEA,OAAO,eAAeC,UAAUA,CAACD,IAAI,EAAE;EACnC,MAAMF,QAAQ,GAAG,MAAMF,KAAK,CAACM,IAAI,CAAE,oBAAmB,EAAEF,IAAI,CAAC;EAC7D,OAAOF,QAAQ;AACnB;AAEA,OAAO,eAAeK,KAAKA,CAACH,IAAI,EAAE;EAC9B,MAAMF,QAAQ,GAAG,MAAMF,KAAK,CAACM,IAAI,CAAE,iBAAgB,EAAEF,IAAI,CAAC;EAC1D,IAAIF,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAC;IACxBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACV,QAAQ,CAACE,IAAI,CAACS,WAAW,CAAC,CAAC;IACxEJ,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEC,IAAI,CAACC,SAAS,CAACV,QAAQ,CAACE,IAAI,CAACU,YAAY,CAAC,CAAC;IAChFd,KAAK,CAACe,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;MACR,MAAMC,KAAK,GAAGV,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAID,KAAK,EAAE;QACPD,MAAM,CAACG,OAAO,CAAC,eAAe,CAAC,GAAI,UAASF,KAAM,EAAC;MACvD;MAEA,OAAOD,MAAM;IACjB,CAAC,EAEAI,KAAK,IAAK;MACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAChC,CACJ,CAAC;EACL;EACA,IAAIpB,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAC;IACxBiB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC3B,IAAI,CAACC,MAAM,CAACC,GAAG,CAACxB,IAAI,CAAC;EACzB;EACA,OAAOF,QAAQ;AACnB;AAEA,OAAO,eAAe2B,MAAMA,CAAA,EAAG;EAC3B;EACApB,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC;AACpC;AAEA,OAAO,eAAeC,OAAOA,CAAA,EAAG;EAC5B,MAAM7B,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAG,CAAE,WAAU,CAAC;EAC7C,OAAOD,QAAQ;AACnB"},"metadata":{},"sourceType":"module","externalDependencies":[]}